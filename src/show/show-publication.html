<!DOCTYPE html>
<npdc:edit-button class="np-primary-control"></npdc:edit-button>
<npdc:loader ng-if="!document"></npdc:loader>

<div class="np-padding">
  <div ng-if="document" class="np-doc">
    <div layout>
      <a ng-href="./?filter-publication_type={{document.publication_type}}"><npdc:collection collection="document.publication_type"></npdc:collection><a ng-href="./?filter-publication_type={{document.publication_type}}">
      <div ng-if="document.doi" style="margin: 8px; padding-top: 8px;"><!-- <md-icon>lock_open</md-icon>&nbsp;open data-->
        doi: <a href="//doi.org/{{document.doi}}">{{ document.doi }}</a>
      </div>
    </div>

    <!-- @todo licensing -->
    <h1 class="md-display-2">{{ document.title }}</h1>

    <h2 ng-if="document.journal.name || document.journal.np_series" class="md-display-1">{{ document.journal.name || document.journal.np_series }}
      <span ng-if="document.volume || document.journal.series_no">{{ document.volume || document.journal.series_no}}</span><span ng-if="document.issue">({{document.issue}})</span><span ng-if="document.pages">, {{ document.pages[0]}}-{{document.pages[1]}}</span> ({{ document.published.split('-')[0] }})
    </h2>

    <!-- if book and editor -->
    <npdc:authors ng-if="editors.length == 0" authors="authors"></npdc:authors>
    <div ng-if="editors.length" class="md-subhead">Edited by <span ng-repeat="name in names(editors)">{{name}}<span ng-if="!$last">,</span> </span></div>

    <div ng-if="document.conference" ng-init="c = document.conference">
      <h2 class="md-display-1">{{ c.name }}</h2>
      <p>{{ c.place }}, {{c.country }} ({{ c.dates[0].split('T')[0]}} â€” {{c.dates[1].split('T')[0]}})</p>
    </div>


    <!--<section ng-if="citation" class="np-citation md-whiteframe-1dp">
      <h4>Citation</h4>
      <span>{{citation}}</span><br>
      <span ng-if="doi">DOI: <a ng-href="{{doi.href}}">{{doi.title}}</a></span>
    </section>-->
    <!--{{ document.files | json }}-->

    <section>
      <h3>{{ 'Overview' | t }}</h3>
      
      <div ng-repeat="o in document.overview">
        {{ lang.getNativeName(o['@language']) }} <span marked="o['@value']"></span>
      </div>
    </section>

    <section>

      <h3>{{ 'Abstract' | t }}</h3>
      
      <div ng-repeat="o in document.abstract">
        <span lang="{{o['@language']}}" marked="{{ o['@value'] }}"></span>
      </div>
    </section>


   <npdc:links links="links" related="related"></npdc:links>

    <section>
      <npdc:organisations></npdc:organisations>
    </section>

    <section>
      <h3>Details</h3>
      <md-divider></md-divider>
      <div>
        <p ng-if="document.issn">ISSN: {{ document.issn | json }}</p>
        <p ng-if="document.issn">ISBN: {{ document.isbn | json }}</p>

        <p ng-if="document.programme">
          Programmes: <span ng-repeat="programme in document.programme"><a ng-href="?q=&filter-programme={{programme}}">{{ programme | t }}</a><span ng-if="!$last"> / </span></span>
        </p>
        <p ng-if="document.topics">
          Topics: <span ng-repeat="topic in document.topics"><a ng-href="?q=&filter-topics={{topic}}">{{ topic | t }}</a><span ng-if="!$last"> / </span></span>
        </p>
        <p ng-if="document.tags">
          Tags: <span ng-repeat="tag in document.tags"><a ng-href="?q=&filter-tags={{tag}}">{{ tag | t }}</a><span ng-if="!$last"> / </span></span>
        </p>
        <p ng-if="document.locations">{{ 'Locations'|t}}: <span ng-repeat="loc in document.locations">{{ loc.placename || loc.area }}, {{ loc.country }}.</span></p>
      </div>
    </section>

    <npdc:document-meta></npdc:document-meta>

  </div>
</div>